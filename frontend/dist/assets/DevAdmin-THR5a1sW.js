import{r as n,R as e,A as y,m as p}from"./index-C0PP8MUq.js";import{R as x}from"./quill.snow-pjUAnC39.js";const R=()=>{const[m,b]=n.useState("create"),[l,c]=n.useState({date:"",topic:"",speaker:"",content:""}),[o,d]=n.useState([]),[E,N]=n.useState([]),[f,u]=n.useState(!1),[g,k]=n.useState(null),[r,i]=n.useState({date:"",topic:"",speaker:"",content:""});n.useEffect(()=>{fetch("/devotional/contents").then(t=>t.json()).then(t=>{d(t);const a=[...new Set(t.map(s=>s.speaker))];N(a)}).catch(t=>console.error("Error fetching devotionals:",t))},[]);const w=async t=>{t.preventDefault();try{const s=await(await fetch("/devotional/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).json();d([...o,s.data]),c({date:"",topic:"",speaker:"",content:""})}catch(a){console.error("Error creating devotional:",a)}},S=t=>{k(t),i(o[t]),u(!0)},D=async t=>{t.preventDefault();try{const s=await(await fetch(`/devotional/update/${o[g]._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json(),T=o.map((q,j)=>j===g?s.data:q);d(T),u(!1)}catch(a){console.error("Error updating devotional:",a)}},C=async t=>{try{await fetch(`/devotional/delete/${o[t]._id}`,{method:"DELETE"}),d(o.filter((a,s)=>s!==t))}catch(a){console.error("Error deleting devotional:",a)}},v={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"}],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},h=["header","bold","italic","underline","strike","script","align","blockquote","code-block","list","bullet","link","image"];return e.createElement("div",{className:"min-h-screen bg-gray-100 p-4"},e.createElement("div",{className:"max-w-6xl mx-auto bg-white shadow rounded-lg"},e.createElement("div",{className:"flex flex-col md:flex-row"},e.createElement("div",{className:"md:w-1/4 border-r"},e.createElement("nav",{className:"flex md:flex-col"},e.createElement("button",{onClick:()=>b("create"),className:`${m==="create"?"bg-blue-500 text-white":"bg-white text-blue-500"} flex-1 py-2 px-4 border-b md:border-b-0 md:border-r transition-colors`},"Create Devotional"),e.createElement("button",{onClick:()=>b("list"),className:`${m==="list"?"bg-blue-500 text-white":"bg-white text-blue-500"} flex-1 py-2 px-4 transition-colors`},"Devotional List"))),e.createElement("div",{className:"md:w-3/4 p-4"},e.createElement(y,{exitBeforeEnter:!0},m==="create"&&e.createElement(p.div,{key:"create",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},e.createElement("h2",{className:"text-2xl font-semibold mb-4"},"Create Devotional"),e.createElement("form",{onSubmit:w},e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Date"),e.createElement("input",{type:"date",value:l.date,onChange:t=>c({...l,date:t.target.value}),className:"w-full border rounded p-2",required:!0})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Topic"),e.createElement("input",{type:"text",value:l.topic,onChange:t=>c({...l,topic:t.target.value}),placeholder:"Enter topic",className:"w-full border rounded p-2",required:!0})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Anchor Scripture"),e.createElement("input",{type:"text",value:l.speaker,onChange:t=>c({...l,speaker:t.target.value}),placeholder:"Enter speaker name",className:"w-full border rounded p-2",list:"speaker-suggestions",required:!0}),e.createElement("datalist",{id:"speaker-suggestions"},E.map((t,a)=>e.createElement("option",{key:a,value:t})))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Content"),e.createElement(x,{value:l.content,onChange:t=>c({...l,content:t}),modules:v,formats:h,className:"bg-white"})),e.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors"},"Submit"))),m==="list"&&e.createElement(p.div,{key:"list",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},e.createElement("h2",{className:"text-2xl font-semibold mb-4"},"Devotional List"),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full border"},e.createElement("thead",null,e.createElement("tr",{className:"bg-gray-200"},e.createElement("th",{className:"px-4 py-2 border"},"Topic"),e.createElement("th",{className:"px-4 py-2 border"},"Date"),e.createElement("th",{className:"px-4 py-2 border"},"Actions"))),e.createElement("tbody",null,o.map((t,a)=>e.createElement("tr",{key:a,className:"hover:bg-gray-50"},e.createElement("td",{className:"px-4 py-2 border"},t.topic),e.createElement("td",{className:"px-4 py-2 border"},t.date),e.createElement("td",{className:"px-4 py-2 border flex space-x-2"},e.createElement("button",{onClick:()=>S(a),className:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors"},"Edit"),e.createElement("button",{onClick:()=>C(a),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors"},"Delete")))))))))))),e.createElement(y,null,f&&e.createElement(p.div,{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},e.createElement(p.div,{className:"bg-white rounded-lg p-6 w-11/12 md:w-1/2 max-h-[90vh] overflow-y-auto",initial:{scale:.8},animate:{scale:1},exit:{scale:.8}},e.createElement("h2",{className:"text-xl font-semibold mb-4"},"Edit Devotional"),e.createElement("form",{onSubmit:D},e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Date"),e.createElement("input",{type:"date",value:r.date,onChange:t=>i({...r,date:t.target.value}),className:"w-full border rounded p-2",required:!0})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Topic"),e.createElement("input",{type:"text",value:r.topic,onChange:t=>i({...r,topic:t.target.value}),placeholder:"Enter topic",className:"w-full border rounded p-2",required:!0})),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Anchor Scripture"),e.createElement("input",{type:"text",value:r.speaker,onChange:t=>i({...r,speaker:t.target.value}),placeholder:"Enter speaker name",className:"w-full border rounded p-2",list:"speaker-suggestions-edit",required:!0}),e.createElement("datalist",{id:"speaker-suggestions-edit"},E.map((t,a)=>e.createElement("option",{key:a,value:t})))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-gray-700 mb-1"},"Content"),e.createElement(x,{value:r.content,onChange:t=>i({...r,content:t}),modules:v,formats:h,className:"bg-white"})),e.createElement("div",{className:"flex justify-end space-x-2"},e.createElement("button",{type:"button",onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors"},"Cancel"),e.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors"},"Save")))))))};export{R as default};
