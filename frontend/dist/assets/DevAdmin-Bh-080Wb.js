import{r,j as e,A as v,m as x}from"./index-zlj08X_R.js";import{R as y}from"./index-DzQncRKk.js";/* empty css                   */const M=()=>{const[d,h]=r.useState("create"),[s,n]=r.useState({date:"",topic:"",speaker:"",content:""}),[o,p]=r.useState([]),[b,N]=r.useState([]),[f,m]=r.useState(!1),[u,k]=r.useState(null),[l,c]=r.useState({date:"",topic:"",speaker:"",content:""});r.useEffect(()=>{fetch("/devotional/contents").then(t=>t.json()).then(t=>{p(t);const a=[...new Set(t.map(i=>i.speaker))];N(a)}).catch(t=>console.error("Error fetching devotionals:",t))},[]);const w=async t=>{t.preventDefault();try{const i=await(await fetch("/devotional/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();p([...o,i.data]),n({date:"",topic:"",speaker:"",content:""})}catch(a){console.error("Error creating devotional:",a)}},S=t=>{k(t),c(o[t]),m(!0)},D=async t=>{t.preventDefault();try{const i=await(await fetch(`/devotional/update/${o[u]._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).json(),C=o.map((T,q)=>q===u?i.data:T);p(C),m(!1)}catch(a){console.error("Error updating devotional:",a)}},E=async t=>{try{await fetch(`/devotional/delete/${o[t]._id}`,{method:"DELETE"}),p(o.filter((a,i)=>i!==t))}catch(a){console.error("Error deleting devotional:",a)}},j={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"}],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},g=["header","bold","italic","underline","strike","script","align","blockquote","code-block","list","bullet","link","image"];return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-4",children:[e.jsx("div",{className:"max-w-6xl mx-auto bg-white shadow rounded-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/4 border-r",children:e.jsxs("nav",{className:"flex md:flex-col",children:[e.jsx("button",{onClick:()=>h("create"),className:`${d==="create"?"bg-blue-500 text-white":"bg-white text-blue-500"} flex-1 py-2 px-4 border-b md:border-b-0 md:border-r transition-colors`,children:"Create Devotional"}),e.jsx("button",{onClick:()=>h("list"),className:`${d==="list"?"bg-blue-500 text-white":"bg-white text-blue-500"} flex-1 py-2 px-4 transition-colors`,children:"Devotional List"})]})}),e.jsx("div",{className:"md:w-3/4 p-4",children:e.jsxs(v,{exitBeforeEnter:!0,children:[d==="create"&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Create Devotional"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:s.date,onChange:t=>n({...s,date:t.target.value}),className:"w-full border rounded p-2",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Topic"}),e.jsx("input",{type:"text",value:s.topic,onChange:t=>n({...s,topic:t.target.value}),placeholder:"Enter topic",className:"w-full border rounded p-2",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Anchor Scripture"}),e.jsx("input",{type:"text",value:s.speaker,onChange:t=>n({...s,speaker:t.target.value}),placeholder:"Enter speaker name",className:"w-full border rounded p-2",list:"speaker-suggestions",required:!0}),e.jsx("datalist",{id:"speaker-suggestions",children:b.map((t,a)=>e.jsx("option",{value:t},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Content"}),e.jsx(y,{value:s.content,onChange:t=>n({...s,content:t}),modules:j,formats:g,className:"bg-white"})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Submit"})]})]},"create"),d==="list"&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Devotional List"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"px-4 py-2 border",children:"Topic"}),e.jsx("th",{className:"px-4 py-2 border",children:"Date"}),e.jsx("th",{className:"px-4 py-2 border",children:"Actions"})]})}),e.jsx("tbody",{children:o.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 border",children:t.topic}),e.jsx("td",{className:"px-4 py-2 border",children:t.date}),e.jsxs("td",{className:"px-4 py-2 border flex space-x-2",children:[e.jsx("button",{onClick:()=>S(a),className:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>E(a),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors",children:"Delete"})]})]},a))})]})})]},"list")]})})]})}),e.jsx(v,{children:f&&e.jsx(x.div,{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(x.div,{className:"bg-white rounded-lg p-6 w-11/12 md:w-1/2 max-h-[90vh] overflow-y-auto",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Devotional"}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:l.date,onChange:t=>c({...l,date:t.target.value}),className:"w-full border rounded p-2",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Topic"}),e.jsx("input",{type:"text",value:l.topic,onChange:t=>c({...l,topic:t.target.value}),placeholder:"Enter topic",className:"w-full border rounded p-2",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Anchor Scripture"}),e.jsx("input",{type:"text",value:l.speaker,onChange:t=>c({...l,speaker:t.target.value}),placeholder:"Enter speaker name",className:"w-full border rounded p-2",list:"speaker-suggestions-edit",required:!0}),e.jsx("datalist",{id:"speaker-suggestions-edit",children:b.map((t,a)=>e.jsx("option",{value:t},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",children:"Content"}),e.jsx(y,{value:l.content,onChange:t=>c({...l,content:t}),modules:j,formats:g,className:"bg-white"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Save"})]})]})]})})})]})};export{M as default};
