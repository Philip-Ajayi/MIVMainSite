import{r as d,j as e,A as C,m as y}from"./index-zlj08X_R.js";const L=()=>{const[i,p]=d.useState("create"),[l,b]=d.useState({image:"",title:"",startDate:"",endDate:"",time:"",description:"",registrationLink:"",televised:!1,televisedLink:""}),[v,g]=d.useState([]),[s,o]=d.useState(null),[f,m]=d.useState(!1),j=async()=>{try{const a=await(await fetch("/event/events")).json();g(a)}catch(t){console.error("Error fetching events:",t)}};d.useEffect(()=>{i==="list"&&j()},[i]);const r=t=>{const{name:a,value:c,type:x,checked:u}=t.target;b(h=>({...h,[a]:x==="checkbox"?u:c}))},N=async t=>{t.preventDefault();try{(await fetch("/event/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(alert("Event created successfully!"),b({image:"",title:"",startDate:"",endDate:"",time:"",description:"",registrationLink:"",televised:!1,televisedLink:""})):alert("Error creating event")}catch(a){console.error("Error creating event:",a),alert("Error creating event")}},k=async t=>{if(window.confirm("Are you sure you want to delete this event?"))try{(await fetch(`/event/events/${t}`,{method:"DELETE"})).ok?g(v.filter(c=>c._id!==t)):alert("Failed to delete event")}catch(a){console.error("Error deleting event:",a)}},w=t=>{o(t),m(!0)},n=t=>{const{name:a,value:c,type:x,checked:u}=t.target;o(h=>({...h,[a]:x==="checkbox"?u:c}))},E=async t=>{t.preventDefault();try{(await fetch(`/event/events/${s._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(alert("Event updated successfully!"),j(),m(!1),o(null)):alert("Error updating event")}catch(a){console.error("Error updating event:",a),alert("Error updating event")}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"border-b",children:e.jsxs("nav",{className:"flex",children:[e.jsx("button",{className:`px-4 py-2 focus:outline-none ${i==="create"?"border-b-2 border-blue-500":""}`,onClick:()=>p("create"),children:"Create Event"}),e.jsx("button",{className:`px-4 py-2 focus:outline-none ${i==="list"?"border-b-2 border-blue-500":""}`,onClick:()=>p("list"),children:"List Events"})]})}),e.jsxs("div",{className:"p-4",children:[i==="create"&&e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Image URL"}),e.jsx("input",{type:"text",name:"image",value:l.image,onChange:r,placeholder:"https://example.com/image.jpg",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:l.title,onChange:r,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:r,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:r,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Time"}),e.jsx("input",{type:"text",name:"time",value:l.time,onChange:r,placeholder:"10:00 AM - 2:00 PM",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Description"}),e.jsx("textarea",{name:"description",value:l.description,onChange:r,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Registration Link"}),e.jsx("input",{type:"url",name:"registrationLink",value:l.registrationLink,onChange:r,placeholder:"https://example.com/register",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"televised",checked:l.televised,onChange:r,className:"h-4 w-4"}),e.jsx("label",{className:"text-sm font-medium",children:"Televised"})]}),l.televised&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Televised Link"}),e.jsx("input",{type:"url",name:"televisedLink",value:l.televisedLink,onChange:r,placeholder:"https://example.com/watch",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition",children:"Create Event"})]}),i==="list"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(t.startDate).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[e.jsx("button",{onClick:()=>w(t),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),e.jsx("button",{onClick:()=>k(t._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t._id))})]})})]})]}),e.jsx(C,{children:f&&s&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs(y.div,{initial:{y:"-100vh"},animate:{y:0},exit:{y:"100vh"},transition:{type:"spring",stiffness:100},className:"bg-white rounded-lg shadow-lg w-11/12 md:w-2/3 lg:w-1/2 max-h-full overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Event"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Image URL"}),e.jsx("input",{type:"text",name:"image",value:s.image,onChange:n,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",name:"title",value:s.title,onChange:n,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Start Date"}),e.jsx("input",{type:"date",name:"startDate",value:s.startDate.split("T")[0],onChange:n,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:s.endDate?s.endDate.split("T")[0]:"",onChange:n,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Time"}),e.jsx("input",{type:"text",name:"time",value:s.time,onChange:n,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Description"}),e.jsx("textarea",{name:"description",value:s.description,onChange:n,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Registration Link"}),e.jsx("input",{type:"url",name:"registrationLink",value:s.registrationLink,onChange:n,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"televised",checked:s.televised,onChange:n,className:"h-4 w-4"}),e.jsx("label",{className:"text-sm font-medium",children:"Televised"})]}),s.televised&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Televised Link"}),e.jsx("input",{type:"url",name:"televisedLink",value:s.televisedLink,onChange:n,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),o(null)},className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition",children:"Update Event"})]})]})]})})})]})};export{L as default};
