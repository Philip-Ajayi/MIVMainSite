import{r as l,R as e,A as ge,m as s}from"./index-B9rpfc-n.js";function ye(){const[o,X]=l.useState(0),[y,S]=l.useState(""),[N,x]=l.useState(""),[v,w]=l.useState(""),[C,T]=l.useState(""),[k,D]=l.useState(""),[ee,te]=l.useState([]),[O,E]=l.useState(null),[I,q]=l.useState(""),[L,$]=l.useState(""),[j,U]=l.useState(""),[A,P]=l.useState(""),[R,Z]=l.useState(""),[_,M]=l.useState(""),[z,J]=l.useState(""),[B,K]=l.useState(""),[ae,le]=l.useState([]),[F,g]=l.useState(null),[G,H]=l.useState(""),[Y,Q]=l.useState(""),[V,W]=l.useState("");l.useEffect(()=>{u(),p()},[]);const u=async()=>{try{const a=await(await fetch("/radio/schedule/all")).json();te(a)}catch(t){console.error("Error fetching schedules:",t)}},p=async()=>{try{const a=await(await fetch("/radio/chatsession/all")).json();le(a)}catch(t){console.error("Error fetching chat sessions:",t)}},h=t=>{let a=parseInt(t,10);isNaN(a)&&(a=0);const n=a>=0?"+":"-",r=Math.abs(a).toString().padStart(2,"0");return`${n}${r}:00`},f=(t,a)=>{if(!t||!a)return"";const n=new Date(t),r=a[0]==="+"?1:-1,c=parseInt(a.slice(1,3),10),m=parseInt(a.slice(4,6),10),me=r*(c*60+m),d=new Date(n.getTime()+me*60*1e3),b=Ee=>Ee.toString().padStart(2,"0"),de=d.getFullYear(),ue=b(d.getMonth()+1),pe=b(d.getDate()),he=b(d.getHours()),be=b(d.getMinutes());return`${de}-${ue}-${pe}T${he}:${be}`},ne=async t=>{t.preventDefault();const a=h(k),n=new Date(C+a).toISOString(),r={name:y,description:N,image:v,scheduleTime:n,timeZone:a};try{await fetch("/radio/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),u(),S(""),x(""),w(""),T(""),D("")}catch(c){console.error("Error creating schedule:",c)}},re=async t=>{t.preventDefault();const a=h(R),n=new Date(A+a).toISOString(),r={name:I,description:L,image:j,scheduleTime:n,timeZone:a};try{await fetch(`/radio/schedule/${O._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),u(),E(null)}catch(c){console.error("Error updating schedule:",c)}},ce=async t=>{if(window.confirm("Are you sure you want to delete this schedule?"))try{await fetch(`/radio/schedule/${t}`,{method:"DELETE"}),u()}catch(a){console.error("Error deleting schedule:",a)}},se=async t=>{t.preventDefault();const a=h(B),n=new Date(_+a).toISOString(),r=new Date(z+a).toISOString(),c={startTime:n,endTime:r,timeZone:a};try{await fetch("/radio/chatsession",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),p(),M(""),J(""),K("")}catch(m){console.error("Error creating chat session:",m)}},oe=async t=>{t.preventDefault();const a=h(V),n=new Date(G+a).toISOString(),r=new Date(Y+a).toISOString(),c={startTime:n,endTime:r,timeZone:a};try{await fetch(`/radio/chatsession/${F._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),p(),g(null)}catch(m){console.error("Error updating chat session:",m)}},ie=async t=>{if(window.confirm("Are you sure you want to delete this chat session?"))try{await fetch(`/radio/chatsession/${t}`,{method:"DELETE"}),p()}catch(a){console.error("Error deleting chat session:",a)}},i={server:"link.zeno.fm",port:"80",mount:"/qqgdtv5o3isuv",username:"source",password:"BKugcIgK"};return e.createElement("div",{className:"container mx-auto p-4"},e.createElement("div",{className:"flex flex-wrap space-x-4 border-b mb-4"},["Create Schedule","List Schedules","Create Chat Session","List Chat Sessions","Radio Credentials"].map((t,a)=>e.createElement("button",{key:a,onClick:()=>X(a),className:`py-2 px-4 focus:outline-none ${o===a?"border-b-2 border-blue-500 text-blue-500":"text-gray-600"}`},t))),e.createElement(ge,{exitBeforeEnter:!0},o===0&&e.createElement(s.div,{key:"create-schedule",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"Create Schedule"),e.createElement("form",{onSubmit:ne,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Name"),e.createElement("input",{type:"text",value:y,onChange:t=>S(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Description"),e.createElement("textarea",{value:N,onChange:t=>x(t.target.value),className:"w-full border rounded p-2"})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Image URL"),e.createElement("input",{type:"url",value:v,onChange:t=>w(t.target.value),className:"w-full border rounded p-2",placeholder:"https://example.com/image.jpg"})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Schedule Time"),e.createElement("input",{type:"datetime-local",value:C,onChange:t=>T(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"UTC Offset (e.g., +1, -5)"),e.createElement("input",{type:"text",value:k,onChange:t=>D(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded"},"Create Schedule"))),o===1&&e.createElement(s.div,{key:"list-schedules",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"List Schedules"),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full border"},e.createElement("thead",null,e.createElement("tr",{className:"bg-gray-100"},e.createElement("th",{className:"p-2 border"},"Name"),e.createElement("th",{className:"p-2 border"},"Time"),e.createElement("th",{className:"p-2 border"},"Actions"))),e.createElement("tbody",null,ee.map(t=>e.createElement("tr",{key:t._id},e.createElement("td",{className:"p-2 border"},t.name),e.createElement("td",{className:"p-2 border"},new Date(t.scheduleTime).toLocaleDateString()," at"," ",new Date(t.scheduleTime).toLocaleTimeString()),e.createElement("td",{className:"p-2 border space-x-2"},e.createElement("button",{onClick:()=>{E(t),q(t.name),$(t.description),U(t.image||""),P(f(t.scheduleTime,t.timeZone)),Z(t.timeZone.replace(":00",""))},className:"bg-green-500 text-white px-2 py-1 rounded"},"Edit"),e.createElement("button",{onClick:()=>ce(t._id),className:"bg-red-500 text-white px-2 py-1 rounded"},"Delete")))))))),o===2&&e.createElement(s.div,{key:"create-chat",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"Create Chat Session"),e.createElement("form",{onSubmit:se,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Start Time"),e.createElement("input",{type:"datetime-local",value:_,onChange:t=>M(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"End Time"),e.createElement("input",{type:"datetime-local",value:z,onChange:t=>J(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"UTC Offset (e.g., +1, -5)"),e.createElement("input",{type:"text",value:B,onChange:t=>K(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded"},"Create Chat Session"))),o===3&&e.createElement(s.div,{key:"list-chat",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"List Chat Sessions"),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full border"},e.createElement("thead",null,e.createElement("tr",{className:"bg-gray-100"},e.createElement("th",{className:"p-2 border"},"Start Time"),e.createElement("th",{className:"p-2 border"},"End Time"),e.createElement("th",{className:"p-2 border"},"Actions"))),e.createElement("tbody",null,ae.map(t=>e.createElement("tr",{key:t._id},e.createElement("td",{className:"p-2 border"},new Date(t.startTime).toLocaleString()),e.createElement("td",{className:"p-2 border"},new Date(t.endTime).toLocaleString()),e.createElement("td",{className:"p-2 border space-x-2"},e.createElement("button",{onClick:()=>{g(t),H(f(t.startTime,t.timeZone)),Q(f(t.endTime,t.timeZone)),W(t.timeZone.replace(":00",""))},className:"bg-green-500 text-white px-2 py-1 rounded"},"Edit"),e.createElement("button",{onClick:()=>ie(t._id),className:"bg-red-500 text-white px-2 py-1 rounded"},"Delete")))))))),o===4&&e.createElement(s.div,{key:"radio-credentials",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"Radio Credentials"),e.createElement("div",{className:"p-4 border rounded space-y-2"},e.createElement("p",null,e.createElement("strong",null,"Server:")," ",i.server),e.createElement("p",null,e.createElement("strong",null,"Port:")," ",i.port),e.createElement("p",null,e.createElement("strong",null,"Mount:")," ",i.mount),e.createElement("p",null,e.createElement("strong",null,"Username:")," ",i.username),e.createElement("p",null,e.createElement("strong",null,"Password:")," ",i.password)),e.createElement("div",{className:"mt-4"},e.createElement("a",{href:"https://dashboard.zeno.fm",target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 text-white px-4 py-2 rounded"},"Go to Zeno Dashboard")))),O&&e.createElement("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},e.createElement(s.div,{className:"bg-white rounded p-4 max-h-full overflow-y-auto w-11/12 md:w-1/2",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"Edit Schedule"),e.createElement("form",{onSubmit:re,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Name"),e.createElement("input",{type:"text",value:I,onChange:t=>q(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Description"),e.createElement("textarea",{value:L,onChange:t=>$(t.target.value),className:"w-full border rounded p-2"})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Image URL"),e.createElement("input",{type:"url",value:j,onChange:t=>U(t.target.value),className:"w-full border rounded p-2",placeholder:"https://example.com/image.jpg"})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Schedule Time"),e.createElement("input",{type:"datetime-local",value:A,onChange:t=>P(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"UTC Offset (e.g., +1, -5)"),e.createElement("input",{type:"text",value:R,onChange:t=>Z(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",{className:"flex space-x-2"},e.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded"},"Save Changes"),e.createElement("button",{type:"button",onClick:()=>E(null),className:"bg-gray-500 text-white px-4 py-2 rounded"},"Cancel"))))),F&&e.createElement("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},e.createElement(s.div,{className:"bg-white rounded p-4 max-h-full overflow-y-auto w-11/12 md:w-1/2",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8}},e.createElement("h2",{className:"text-xl font-bold mb-4"},"Edit Chat Session"),e.createElement("form",{onSubmit:oe,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"Start Time"),e.createElement("input",{type:"datetime-local",value:G,onChange:t=>H(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"End Time"),e.createElement("input",{type:"datetime-local",value:Y,onChange:t=>Q(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block mb-1"},"UTC Offset (e.g., +1, -5)"),e.createElement("input",{type:"text",value:V,onChange:t=>W(t.target.value),className:"w-full border rounded p-2",required:!0})),e.createElement("div",{className:"flex space-x-2"},e.createElement("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded"},"Save Changes"),e.createElement("button",{type:"button",onClick:()=>g(null),className:"bg-gray-500 text-white px-4 py-2 rounded"},"Cancel"))))))}export{ye as default};
