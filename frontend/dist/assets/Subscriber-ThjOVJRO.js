import{r as a,R as e,m as N,n as k}from"./index-BeF0K1pZ.js";import{a as m}from"./axios-upsvKRUO.js";const B=()=>{const[i,d]=a.useState([]),[n,w]=a.useState(""),[o,c]=a.useState(null),[u,b]=a.useState(""),[r,g]=a.useState("list"),[y,x]=a.useState(""),[f,p]=a.useState(""),[E,s]=a.useState(null);a.useEffect(()=>{v()},[]);const v=async()=>{try{const t=await m.get("/contact/email");d(t.data)}catch(t){console.error("Error fetching subscribers:",t)}},S=async()=>{if(u.toLowerCase()!=="delete"){alert("Type 'delete' to confirm.");return}try{await m.delete(`/contact/email/${o}`),d(i.filter(t=>t._id!==o)),c(null),b("")}catch(t){console.error("Error deleting subscriber:",t)}},h=i.filter(t=>t.name.toLowerCase().includes(n.toLowerCase())||t.email.toLowerCase().includes(n.toLowerCase())),C=async t=>{t.preventDefault(),s(null);try{(await m.post("/contact/sendSubscribeMessage",{subject:y,body:f})).status===200?(s("Broadcast message sent successfully!"),x(""),p("")):s("There was an error sending the broadcast message.")}catch(l){console.error("Error sending broadcast message:",l),s("There was an error sending the broadcast message.")}};return e.createElement("div",{className:"p-6 bg-gray-900 min-h-screen text-white"},e.createElement("div",{className:"container mx-auto"},e.createElement("div",{className:"flex flex-col sm:flex-row mb-6 border-b border-gray-700"},e.createElement("button",{onClick:()=>g("list"),className:`py-3 px-6 text-center focus:outline-none ${r==="list"?"bg-gray-800 text-white border-b-2 border-blue-500":"bg-gray-700 text-gray-300"}`},"Subscribers List"),e.createElement("button",{onClick:()=>g("message"),className:`py-3 px-6 text-center focus:outline-none ${r==="message"?"bg-gray-800 text-white border-b-2 border-blue-500":"bg-gray-700 text-gray-300"}`},"Broadcast Message")),r==="list"&&e.createElement("div",null,e.createElement("h2",{className:"text-3xl font-bold text-center mb-6"},"Subscribers List"),e.createElement("div",{className:"mb-4"},e.createElement("input",{type:"text",placeholder:"Search by name or email...",className:"w-full p-2 rounded bg-gray-800 border border-gray-600 focus:outline-none focus:border-blue-500",value:n,onChange:t=>w(t.target.value)})),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full bg-gray-800 rounded-lg overflow-hidden"},e.createElement("thead",null,e.createElement("tr",{className:"bg-gray-700 text-left text-gray-300"},e.createElement("th",{className:"py-3 px-4"},"Name"),e.createElement("th",{className:"py-3 px-4"},"Email"),e.createElement("th",{className:"py-3 px-4 text-center"},"Action"))),e.createElement("tbody",null,h.length>0?h.map((t,l)=>e.createElement(N.tr,{key:t._id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},className:"border-b border-gray-700 hover:bg-gray-750 transition"},e.createElement("td",{className:"py-3 px-4"},t.name),e.createElement("td",{className:"py-3 px-4"},t.email),e.createElement("td",{className:"py-3 px-4 text-center"},e.createElement("button",{onClick:()=>c(t._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded transition"},e.createElement(k,null))))):e.createElement("tr",null,e.createElement("td",{colSpan:"3",className:"text-center py-4 text-gray-400"},"No subscribers found")))))),r==="message"&&e.createElement("div",{className:"max-w-xl mx-auto"},e.createElement("h2",{className:"text-3xl font-bold text-center mb-6"},"Broadcast Message"),e.createElement("form",{onSubmit:C,className:"space-y-6 bg-gray-800 p-6 rounded-lg"},e.createElement("div",null,e.createElement("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-300"},"Subject"),e.createElement("input",{type:"text",id:"subject",name:"subject",required:!0,value:y,onChange:t=>x(t.target.value),placeholder:"Enter subject (you can use {name})",className:"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:border-blue-500"})),e.createElement("div",null,e.createElement("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-300"},"Body"),e.createElement("textarea",{id:"body",name:"body",rows:"6",required:!0,value:f,onChange:t=>p(t.target.value),placeholder:"Enter message body (you can use {name})",className:"mt-1 block w-full p-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:border-blue-500"})),e.createElement("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-700 text-white font-semibold rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Send Broadcast"),E&&e.createElement("p",{className:"text-center text-sm mt-2 text-gray-300"},E)))),o&&e.createElement("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60"},e.createElement(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-gray-800 p-6 rounded-lg shadow-lg text-center"},e.createElement("h3",{className:"text-xl font-bold text-red-500 mb-3"},"Confirm Deletion"),e.createElement("p",{className:"text-gray-300 mb-2"},"Type ",e.createElement("strong",null,"delete")," to confirm:"),e.createElement("input",{type:"text",className:"w-full p-2 rounded bg-gray-700 border border-gray-500 focus:outline-none focus:border-red-500 mb-3",value:u,onChange:t=>b(t.target.value)}),e.createElement("div",{className:"flex justify-center gap-4"},e.createElement("button",{onClick:S,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition"},"Confirm"),e.createElement("button",{onClick:()=>c(null),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded transition"},"Cancel")))))};export{B as default};
