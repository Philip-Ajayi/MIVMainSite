import{r as l,R as e,L as C,m as v}from"./index-MH5eDRh5.js";const f=({children:r,className:g=""})=>{const c=l.useRef(null),[u,n]=l.useState(!1);return l.useEffect(()=>{const i=new IntersectionObserver(([a])=>{a.isIntersecting&&(n(!0),i.disconnect())},{threshold:.1});return c.current&&i.observe(c.current),()=>{i.disconnect()}},[]),e.createElement("div",{ref:c,className:g},u?r:null)},F=()=>{const[r,g]=l.useState([]),[c,u]=l.useState([]),[n,i]=l.useState(""),[a,p]=l.useState(""),[y,N]=l.useState([]),[x,w]=l.useState(12),[S,d]=l.useState(!1);l.useEffect(()=>{fetch("/sermon/items").then(t=>t.json()).then(t=>{g(t),u(t);const s=Array.from(new Set(t.map(m=>m.speaker)));N(s)}).catch(t=>console.error(t))},[]),l.useEffect(()=>{let t=r;if(n&&(t=t.filter(s=>s.speaker===n)),a){const s=a.toLowerCase();t=t.filter(m=>m.name.toLowerCase().includes(s)||m.series.toLowerCase().includes(s)||m.speaker.toLowerCase().includes(s))}u(t),w(12)},[n,a,r]);const b=n||a,o=r[0],h=!b&&r.length>1?r.slice(1):c,E=t=>new Date(t).toLocaleDateString(),k=t=>{p(t),d(!1)};return e.createElement("div",{className:"min-h-screen bg-white px-6 py-10"},e.createElement("h1",{className:"text-4xl md:text-5xl font-bold text-center text-gray-800 mb-10"},"Sermons"),e.createElement("div",{className:"flex flex-col md:flex-row items-center justify-between mb-10 gap-4"},e.createElement("div",{className:"flex flex-wrap gap-4 items-center"},e.createElement("select",{value:n,onChange:t=>i(t.target.value),className:"border border-gray-200 rounded-md px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},e.createElement("option",{value:""},"All Speakers"),y.map(t=>e.createElement("option",{key:t,value:t},t))),e.createElement(C,{to:"/sermon-video",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-full transition-colors duration-300"},"Sermon Videos")),e.createElement("div",{className:"w-full md:w-1/3 relative"},e.createElement("input",{type:"text",placeholder:"Search by name, series or speaker",value:a,onChange:t=>{p(t.target.value),d(!0)},onBlur:()=>{setTimeout(()=>d(!1),100)},onFocus:()=>{a&&d(!0)},className:"border border-gray-200 rounded-md px-4 py-2 text-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500",autoComplete:"off"}),S&&a&&e.createElement("ul",{className:"absolute z-50 bg-white border border-gray-300 rounded-md w-full mt-1 max-h-60 overflow-auto shadow-lg"},r.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())||t.series.toLowerCase().includes(a.toLowerCase())||t.speaker.toLowerCase().includes(a.toLowerCase())).slice(0,5).map(t=>e.createElement("li",{key:t._id,onMouseDown:()=>k(t.name),className:"cursor-pointer px-4 py-2 hover:bg-blue-600 hover:text-white"},t.name," â€” ",e.createElement("span",{className:"italic"},t.speaker))),r.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())||t.series.toLowerCase().includes(a.toLowerCase())||t.speaker.toLowerCase().includes(a.toLowerCase())).length===0&&e.createElement("li",{className:"px-4 py-2 text-gray-500"},"No suggestions found")))),!b&&o&&e.createElement(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white shadow-2xl rounded-xl p-8 mb-12 transition-all duration-300 max-w-5xl mx-auto"},e.createElement("div",{className:"flex flex-col md:flex-row items-center gap-8"},e.createElement(f,{className:"flex-shrink-0 w-72 h-72"},e.createElement("img",{src:`https://drive.google.com/thumbnail?id=${o.thumbnail}`,alt:o.name,className:"object-cover w-full h-full rounded-xl"})),e.createElement("div",{className:"flex flex-col justify-between flex-1"},e.createElement("div",null,e.createElement("span",{className:"text-sm text-blue-500 uppercase tracking-wide"},"Latest Sermon"),e.createElement("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mt-2"},o.name),e.createElement("p",{className:"text-gray-700 text-lg mt-2"},e.createElement("span",{className:"font-semibold"},"Speaker:")," ",o.speaker),e.createElement("p",{className:"text-gray-700 text-lg mt-1"},e.createElement("span",{className:"font-semibold"},"Series:")," ",o.series),e.createElement("p",{className:"text-gray-700 text-lg mt-1"},e.createElement("span",{className:"font-semibold"},"Date:")," ",E(o.date)),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Current Series")),e.createElement("div",{className:"mt-6"},e.createElement("a",{href:`https://drive.google.com/uc?export=download&id=${o.audioFile}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full transition-colors duration-300"},"Download Audio")))),e.createElement(f,{className:"mt-8"},e.createElement("iframe",{src:`https://drive.google.com/file/d/${o.audioFile}/preview`,title:"Audio Preview",className:"w-full h-24 rounded-lg shadow-md",allow:"autoplay",loading:"lazy"}))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"},h.slice(0,x).map((t,s)=>e.createElement(v.div,{key:t._id,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white shadow-lg rounded-xl overflow-hidden flex flex-col transform hover:scale-105 transition-transform duration-300"},e.createElement(f,{className:"relative aspect-square"},e.createElement("img",{src:`https://drive.google.com/thumbnail?id=${t.thumbnail}`,alt:t.name,className:"object-cover w-full h-full"})),e.createElement("div",{className:"p-6 flex flex-col flex-grow"},e.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-3"},t.name),e.createElement("p",{className:"text-gray-600 text-lg mb-1"},e.createElement("span",{className:"font-medium"},"Speaker:")," ",t.speaker),e.createElement("p",{className:"text-gray-600 text-lg mb-1"},e.createElement("span",{className:"font-medium"},"Series:")," ",t.series),e.createElement("p",{className:"text-gray-600 text-lg mb-2"},e.createElement("span",{className:"font-medium"},"Date:")," ",E(t.date)),e.createElement("div",{className:"mt-auto flex flex-col gap-4"},e.createElement("a",{href:`https://drive.google.com/uc?export=download&id=${t.audioFile}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white text-lg px-4 py-2 rounded-full text-center transition-colors duration-300"},"Download Audio"),e.createElement(f,{className:"w-full"},e.createElement("iframe",{src:`https://drive.google.com/file/d/${t.audioFile}/preview`,title:"Audio Preview",className:"w-full h-20 rounded-lg shadow-sm",allow:"autoplay",loading:"lazy"}))))))),x<h.length&&e.createElement("div",{className:"flex justify-center mt-10"},e.createElement("button",{onClick:()=>w(t=>t+12),className:"bg-blue-600 hover:bg-blue-700 text-white text-lg px-8 py-3 rounded-full transition-colors duration-300"},"Load More")))};export{F as default};
