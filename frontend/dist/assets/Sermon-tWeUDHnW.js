import{r as a,R as e,m as w}from"./index-C0PP8MUq.js";const g=({children:s,className:p=""})=>{const c=a.useRef(null),[f,n]=a.useState(!1);return a.useEffect(()=>{const m=new IntersectionObserver(([o])=>{o.isIntersecting&&(n(!0),m.disconnect())},{threshold:.1});return c.current&&m.observe(c.current),()=>{m.disconnect()}},[]),e.createElement("div",{ref:c,className:p},f?s:null)},A=()=>{const[s,p]=a.useState([]),[c,f]=a.useState([]),[n,m]=a.useState(""),[o,y]=a.useState(""),[i,N]=a.useState(""),[S,k]=a.useState([]),[F,C]=a.useState([]),[x,b]=a.useState(15);a.useEffect(()=>{fetch("/sermon/items").then(t=>t.json()).then(t=>{p(t),f(t);const l=Array.from(new Set(t.map(d=>new Date(d.date).getFullYear()))).sort((d,D)=>D-d);k(l);const u=Array.from(new Set(t.map(d=>d.speaker)));C(u)}).catch(t=>console.error(t))},[]),a.useEffect(()=>{let t=s;if(n&&(t=t.filter(l=>new Date(l.date).getFullYear().toString()===n)),o&&(t=t.filter(l=>l.speaker===o)),i){const l=i.toLowerCase();t=t.filter(u=>u.name.toLowerCase().includes(l)||u.series.toLowerCase().includes(l)||u.speaker.toLowerCase().includes(l))}f(t),b(15)},[n,o,i,s]);const E=n||o||i,r=s[0],h=!E&&s.length>1?s.slice(1):c,v=t=>new Date(t).toLocaleDateString();return e.createElement("div",{className:"min-h-screen bg-white px-6 py-10"},e.createElement("h1",{className:"text-4xl md:text-5xl font-bold text-center text-gray-800 mb-10"},"Sermons"),e.createElement("div",{className:"flex flex-col md:flex-row items-center justify-between mb-10 gap-4"},e.createElement("div",{className:"flex flex-wrap gap-4"},e.createElement("select",{value:n,onChange:t=>m(t.target.value),className:"border border-gray-200 rounded-md px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},e.createElement("option",{value:""},"All Years"),S.map(t=>e.createElement("option",{key:t,value:t},t))),e.createElement("select",{value:o,onChange:t=>y(t.target.value),className:"border border-gray-200 rounded-md px-4 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},e.createElement("option",{value:""},"All Speakers"),F.map(t=>e.createElement("option",{key:t,value:t},t)))),e.createElement("div",{className:"w-full md:w-1/3"},e.createElement("input",{type:"text",placeholder:"Search by name, series or speaker",value:i,onChange:t=>N(t.target.value),className:"border border-gray-200 rounded-md px-4 py-2 text-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}))),!E&&r&&e.createElement(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white shadow-2xl rounded-xl p-8 mb-12 transition-all duration-300 max-w-5xl mx-auto"},e.createElement("div",{className:"flex flex-col md:flex-row items-center gap-8"},e.createElement(g,{className:"flex-shrink-0 w-72 h-72"},e.createElement("img",{src:`https://drive.google.com/thumbnail?id=${r.thumbnail}`,alt:r.name,className:"object-cover w-full h-full rounded-xl"})),e.createElement("div",{className:"flex flex-col justify-between flex-1"},e.createElement("div",null,e.createElement("span",{className:"text-sm text-blue-500 uppercase tracking-wide"},"Latest Sermon"),e.createElement("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 mt-2"},r.name),e.createElement("p",{className:"text-gray-700 text-lg mt-2"},e.createElement("span",{className:"font-semibold"},"Speaker:")," ",r.speaker),e.createElement("p",{className:"text-gray-700 text-lg mt-1"},e.createElement("span",{className:"font-semibold"},"Series:")," ",r.series),e.createElement("p",{className:"text-gray-700 text-lg mt-1"},e.createElement("span",{className:"font-semibold"},"Date:")," ",v(r.date)),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Current Series")),e.createElement("div",{className:"mt-6"},e.createElement("a",{href:`https://drive.google.com/uc?export=download&id=${r.audioFile}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full transition-colors duration-300"},"Download Audio")))),e.createElement(g,{className:"mt-8"},e.createElement("iframe",{src:`https://drive.google.com/file/d/${r.audioFile}/preview`,title:"Audio Preview",className:"w-full h-24 rounded-lg shadow-md",allow:"autoplay",loading:"lazy"}))),e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8"},h.slice(0,x).map((t,l)=>e.createElement(w.div,{key:t._id,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-white shadow-lg rounded-xl overflow-hidden flex flex-col transform hover:scale-105 transition-transform duration-300"},e.createElement(g,{className:"relative aspect-square"},e.createElement("img",{src:`https://drive.google.com/thumbnail?id=${t.thumbnail}`,alt:t.name,className:"object-cover w-full h-full"})),e.createElement("div",{className:"p-6 flex flex-col flex-grow"},e.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-3"},t.name),e.createElement("p",{className:"text-gray-600 text-lg mb-1"},e.createElement("span",{className:"font-medium"},"Speaker:")," ",t.speaker),e.createElement("p",{className:"text-gray-600 text-lg mb-1"},e.createElement("span",{className:"font-medium"},"Series:")," ",t.series),e.createElement("p",{className:"text-gray-600 text-lg mb-2"},e.createElement("span",{className:"font-medium"},"Date:")," ",v(t.date)),e.createElement("div",{className:"mt-auto flex flex-col gap-4"},e.createElement("a",{href:`https://drive.google.com/uc?export=download&id=${t.audioFile}`,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white text-lg px-4 py-2 rounded-full text-center transition-colors duration-300"},"Download Audio"),e.createElement(g,{className:"w-full"},e.createElement("iframe",{src:`https://drive.google.com/file/d/${t.audioFile}/preview`,title:"Audio Preview",className:"w-full h-20 rounded-lg shadow-sm",allow:"autoplay",loading:"lazy"}))))))),x<h.length&&e.createElement("div",{className:"flex justify-center mt-10"},e.createElement("button",{onClick:()=>b(t=>t+15),className:"bg-blue-600 hover:bg-blue-700 text-white text-lg px-8 py-3 rounded-full transition-colors duration-300"},"Load More")))};export{A as default};
